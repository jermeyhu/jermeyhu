---
layout: post
title: '数据库中char、varchar、nchar、nvarchar的区别'
date: '2021-08-30'
categories: 数据库
---

我们在进行数据库的设计的时候，很多情况下表中的字段都是用的是字符串类型的数据，其中就有四种选择`char`,`varchar`,`nchar`,`nvarchar`，我们该如何选择？

## 四种类型的详细说明

1. `char`：固定长度，非Unicode字符数据（对英文(ASCII)字符占用1个字节，对一个汉字占用2个字节）。

    用来存储定长数据，长度为n个字节,n的取值范围为1至8,000，存储大小是n个字节。

2. `varchar`：可变长度，非Unicode字符数据（对英文(ASCII)字符占用1个字节，对一个汉字占用2个字节）。

    用来存储变长数据，长度为n的字节，n的取值范围为1至8,000，max指示最大存储大小是2^31-1个字节，存储大小是输入数据的实际长度加2个字节，所输入数据的长度可以为0个字符。

3. `nchar`：固定长度，Unicode字符数据。

    n个字符，n值必须在1到4,000之间（含）。存储大小为两倍n字节。

4. `nvarchar`：可变长度，Unicode字符数据。

    n个字符，n值在1到4,000之间（含）。max指示最大存储大小为2^31-1字节，存储大小是所输入字符个数的两倍+2个字节，所输入数据的长度可以为0个字符。

## Unicode或非Unicode的区别

1. 非Unicode：`char`，`varchar`

2. Unicode：`nchar`，`nvarchar`

    数据库中，英文字符只需要一个字节存储就足够了，但汉字和其他众多非英文字符，则需要两个字节存储，如果英文与汉字同时存在，由于占用空间数不同，容易造成混乱，导致读取出来的字符串是乱码。

    Unicode字符集就是为了解决字符集这种不兼容的问题而产生的，它所有的字符都用两个字节表示，即英文字符也是用两个字节表示。而前缀n就表示Unicode字符，比如`nchar`,`nvarchar`，这两种类型使用了Unicode字符集。

## 定长和变长的区别：

1. 定长：`char`，`nchar`

2. 变长：`varchar`，`nvarchar`

    定长就是长度固定，没有var前缀的，当要保存的数据长度不够时将自动在其后面填充英文空格，使长度达到相应的长度。

    变长就是长度可变，有var前缀的，表示是实际存储空间是动态变化的，比如`varchar`,`nvarchar`变长字符数据则不会以空格填充。

##  存储容量上的区别：

1. `char`，`varchar`：最多8000个英文，4000个汉字

2. `nchar`，`nvarchar`：可存储4000个字符，无论英文还是汉字

    如果，长度超过了4000个字符，使用的是`text`文本类型。

## 存储效率上的区别：

1. `char`，`nchar`：定长，速度快，占空间大，需处理

2. `varchar`，`nvarchar`：变长，速度慢，占空间小，无需处理

    速度：这里的速度指的是存取的速度。

    处理：主要是对应用程序来说的，如果使用`char`，`nchar`则需要用`trim`之类的函数把两边的空格去掉。

## 总结

一般来说：

如果纯英文和数字，用`char`/`varchar`

如果含有中文字符，`nchar`/`nvarchar`


文章抄自：[量变决定质变](https://blog.csdn.net/nangeali/article/details/51136828)